<button class="mobile-float-btn d-lg-none" (click)="toggleSidebar()">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
    <line x1="3" x2="21" y1="12" y2="12"></line>
    <line x1="3" x2="21" y1="6" y2="6"></line>
    <line x1="3" x2="21" y1="18" y2="18"></line>
  </svg>
</button>

<div class="d-flex vh-100 bg-light">

  <div class="overlay d-lg-none" *ngIf="sidebarOpen() && isMobileView()" (click)="setSidebarOpen(false)" aria-hidden="true"></div>



  <div class="mini-toggle d-none d-lg-flex align-items-center justify-content-center" *ngIf="!sidebarOpen() && !isMobileView()">
    <button class="btn btn-dark p-2 rounded-3" (click)="setSidebarOpen(true)">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line></svg>
    </button>
  </div>

  <div [ngClass]="{'sidebar-collapsed-content': !sidebarOpen() && !isMobileView()}" class="main-content flex-grow-1 overflow-auto">
    <header class="bg-white shadow-sm border-bottom sticky-top top-0 z-10">
      <div class="d-flex align-items-center justify-content-between p-3">
        <div class="d-flex align-items-center gap-3 flex-grow-1 me-4" style="max-width: 500px;">
          <div class="input-group shadow-sm w-100">
            <span class="input-group-text bg-white border-end-0 border-0 rounded-start-3">
              <svg width="20" height="20" class="text-secondary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></svg>
            </span>
            <input type="text" placeholder="Search for reports, users, or data..." class="form-control border-start-0 ps-0 rounded-end-3" [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)" />
          </div>
        </div>
        <div class="d-flex align-items-center gap-3">
          <button class="btn p-2 rounded-3 position-relative">
            <svg width="22" height="22" class="text-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.33 21a1.94 1.94 0 0 0 3.34 0"/></svg>
            <span class="position-absolute translate-middle p-1 bg-danger border border-light rounded-circle" style="top: 10px; right: 5px;"></span>
          </button>
          <div class="d-flex align-items-center gap-2 ps-3 border-start cursor-pointer p-1 rounded-3">
            <div class="text-end d-none d-sm-block">
              <p class="fw-semibold text-dark mb-0">Alex Johnson</p>
              <p class="small text-muted mb-0">System Admin</p>
            </div>
            <div class="avatar bg-dark text-white rounded-3 d-flex align-items-center justify-content-center fw-bold flex-shrink-0" style="width: 40px; height: 40px;">
              A
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="p-4">
      
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mb-4">
        
        <div class="col">
          <div class="card shadow-sm stat-card">
            <div class="card-header border-0 p-0 card-primary" style="height: 5px;"></div>
            <div class="card-body p-4">
              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="icon-circle shadow-sm card-primary">
                   <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                </div>
                <span class="badge text-bg-success fw-semibold">+20.1%</span>
              </div>
              <p class="text-muted small mb-1">Total Sales</p>
              <p class="fs-3 fw-bold text-dark">$45,231</p>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card shadow-sm stat-card">
            <div class="card-header border-0 p-0 card-secondary" style="height: 5px;"></div>
            <div class="card-body p-4">
              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="icon-circle shadow-sm card-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.63h9.72a2 2 0 0 0 2-1.63L23 6H6"/></svg>
                </div>
                <span class="badge text-bg-success fw-semibold">+15.3%</span>
              </div>
              <p class="text-muted small mb-1">New Orders</p>
              <p class="fs-3 fw-bold text-dark">356</p>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card shadow-sm stat-card">
            <div class="card-header border-0 p-0 card-success" style="height: 5px;"></div>
            <div class="card-body p-4">
              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="icon-circle shadow-sm card-success">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                </div>
                <span class="badge text-bg-success fw-semibold">+12.5%</span>
              </div>
              <p class="text-muted small mb-1">Total Customers</p>
              <p class="fs-3 fw-bold text-dark">2,356</p>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card shadow-sm stat-card">
            <div class="card-header border-0 p-0 card-info" style="height: 5px;"></div>
            <div class="card-body p-4">
              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="icon-circle shadow-sm card-info">
                   <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                </div>
                <span class="badge text-bg-danger fw-semibold">-0.3%</span>
              </div>
              <p class="text-muted small mb-1">Server Load</p>
              <p class="fs-3 fw-bold text-dark">45%</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-4 mb-4">
        <div class="col-lg-8">
          <div class="chart-container">
            <div class="d-flex align-items-center justify-content-between mb-4">
              <h2 class="h5 fw-bold text-dark mb-0">Revenue & Sales Trend</h2>
              <div class="btn-group" role="group">
                <button class="btn btn-sm btn-primary active">Monthly</button>
                <button class="btn btn-sm btn-outline-secondary">Yearly</button>
              </div>
            </div>
            <div style="height: 300px; width: 100%; position: relative;">
              <svg viewBox="0 0 600 300" preserveAspectRatio="none" class="w-100 h-100">
                <line x1="0" y1="300" x2="600" y2="300" stroke="#E9ECEF" stroke-width="1"/>
                <line x1="0" y1="150" x2="600" y2="150" stroke="#E9ECEF" stroke-width="1" stroke-dasharray="5,5"/>
                <polygon points="0,300 100,280 200,100 300,150 400,220 500,180 600,250 600,300" fill="#6C757D" fill-opacity="0.3"/>
                <polygon points="0,300 100,250 200,50 300,120 400,200 500,150 600,220 600,300" fill="#0D6EFD" fill-opacity="0.2"/>
                <polyline points="0,280 100,280 200,100 300,150 400,220 500,180 600,250" fill="none" stroke="#6C757D" stroke-width="3"/>
                <polyline points="0,250 100,250 200,50 300,120 400,200 500,150 600,220" fill="none" stroke="#0D6EFD" stroke-width="3"/>
              </svg>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="chart-container h-100">
            <h2 class="h5 fw-bold text-dark mb-4">Category Distribution</h2>
            <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
              <svg width="180" height="180" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="#FFC107" />
                <circle cx="50" cy="50" r="45" fill="#198754" clip-path="inset(0 50% 0 0)" />
                <circle cx="50" cy="50" r="45" fill="#6C757D" clip-path="inset(0 0 50% 0)" />
                <circle cx="50" cy="50" r="45" fill="#0D6EFD" clip-path="inset(50% 0 0 50%)" />
                <circle cx="50" cy="50" r="30" fill="white" />
                <text x="50" y="50" text-anchor="middle" dominant-baseline="middle" font-size="12" fill="#212529" font-weight="bold">80%</text>
              </svg>
            </div>

            <div class="mt-4">
              <div class="d-flex align-items-center justify-content-between small mb-2">
                <div class="d-flex align-items-center gap-2">
                  <div class="rounded-circle shadow-sm" style="background-color: #0D6EFD; width: 10px; height: 10px;"></div>
                  <span class="text-dark">Electronics</span>
                </div>
                <span class="fw-bold text-dark">400</span>
              </div>
              <div class="d-flex align-items-center justify-content-between small mb-2">
                <div class="d-flex align-items-center gap-2">
                  <div class="rounded-circle shadow-sm" style="background-color: #6C757D; width: 10px; height: 10px;"></div>
                  <span class="text-dark">Apparel</span>
                </div>
                <span class="fw-bold text-dark">300</span>
              </div>
              <div class="d-flex align-items-center justify-content-between small mb-2">
                <div class="d-flex align-items-center gap-2">
                  <div class="rounded-circle shadow-sm" style="background-color: #198754; width: 10px; height: 10px;"></div>
                  <span class="text-dark">Food</span>
                </div>
                <span class="fw-bold text-dark">200</span>
              </div>
              <div class="d-flex align-items-center justify-content-between small mb-2">
                <div class="d-flex align-items-center gap-2">
                  <div class="rounded-circle shadow-sm" style="background-color: #FFC107; width: 10px; height: 10px;"></div>
                  <span class="text-dark">Others</span>
                </div>
                <span class="fw-bold text-dark">100</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-4 mb-4">
        <div class="col-lg-8">
          <div class="chart-container">
            <h2 class="h5 fw-bold text-dark mb-4">User Acquisition Overview</h2>
            <div class="bar-chart-container d-flex justify-content-around align-items-end">
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 82%" title="Jan: 2400 Users"></div>
                <span class="small text-muted mt-2 fw-medium">Jan</span>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 75%" title="Feb: 2210 Users"></div>
                <span class="small text-muted mt-2 fw-medium">Feb</span>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 78%" title="Mar: 2290 Users"></div>
                <span class="small text-muted mt-2 fw-medium">Mar</span>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 68%" title="Apr: 2000 Users"></div>
                <span class="small text-muted mt-2 fw-medium">Apr</span>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 74%" title="May: 2181 Users"></div>
                <span class="small text-muted mt-2 fw-medium">May</span>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-end h-100">
                <div class="chart-bar" style="height: 85%" title="Jun: 2500 Users"></div>
                <span class="small text-muted mt-2 fw-medium">Jun</span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="chart-container h-100">
            <h2 class="h5 fw-bold text-dark mb-4">Activity Log</h2>
            <div class="d-flex flex-column">
              <div class="d-flex align-items-start gap-3 p-2 rounded-3 activity-item">
                <div class="p-2 rounded-circle bg-light flex-shrink-0 text-primary">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M10 12l2 2 4-4"/></svg>
                </div>
                <div>
                  <p class="fw-medium text-dark mb-0">Updated firewall rules on Server A.</p>
                  <p class="small text-muted mb-0 mt-0">1 min ago</p>
                </div>
              </div>
              <div class="d-flex align-items-start gap-3 p-2 rounded-3 activity-item">
                <div class="p-2 rounded-circle bg-light flex-shrink-0 text-secondary">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                </div>
                <div>
                  <p class="fw-medium text-dark mb-0">New user "Jane Doe" registered.</p>
                  <p class="small text-muted mb-0 mt-0">15 min ago</p>
                </div>
              </div>
              <div class="d-flex align-items-start gap-3 p-2 rounded-3 activity-item">
                <div class="p-2 rounded-circle bg-light flex-shrink-0 text-success">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/></svg>
                </div>
                <div>
                  <p class="fw-medium text-dark mb-0">Generated monthly sales report.</p>
                  <p class="small text-muted mb-0 mt-0">2 hours ago</p>
                </div>
              </div>
              <div class="d-flex align-items-start gap-3 p-2 rounded-3 activity-item">
                <div class="p-2 rounded-circle bg-light flex-shrink-0 text-dark">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="21 8 21 21 3 21 3 8"/><rect width="22" height="6" x="1" y="2"/><line x1="10" x2="14" y1="12" y2="12"/></svg>
                </div>
                <div>
                  <p class="fw-medium text-dark mb-0">System backup completed successfully.</p>
                  <p class="small text-muted mb-0 mt-0">Yesterday</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <div class="d-flex align-items-center justify-content-between mb-4">
          <h2 class="h5 fw-bold text-dark mb-0">Recent Orders</h2>
          <button class="btn btn-sm btn-outline-secondary">View All</button>
        </div>
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
              <tr>
                <th class="py-3 px-4 text-dark fw-semibold small">ORDER ID</th>
                <th class="py-3 px-4 text-dark fw-semibold small">CUSTOMER</th>
                <th class="py-3 px-4 text-dark fw-semibold small">AMOUNT</th>
                <th class="py-3 px-4 text-dark fw-semibold small">STATUS</th>
                <th class="py-3 px-4 text-dark fw-semibold small">TIME</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="py-3 px-4 fw-semibold text-dark">#2301</td>
                <td class="py-3 px-4 text-muted">Alex Johnson</td>
                <td class="py-3 px-4 fw-bold text-dark">$420</td>
                <td class="py-3 px-4">
                  <span class="badge rounded-pill fw-bold py-2 px-3 bg-success-subtle text-success">Completed</span>
                </td>
                <td class="py-3 px-4 text-muted small">5 minutes ago</td>
              </tr>
              <tr>
                <td class="py-3 px-4 fw-semibold text-dark">#2302</td>
                <td class="py-3 px-4 text-muted">Fatima Ali</td>
                <td class="py-3 px-4 fw-bold text-dark">$280</td>
                <td class="py-3 px-4">
                  <span class="badge rounded-pill fw-bold py-2 px-3 bg-warning-subtle text-warning">Processing</span>
                </td>
                <td class="py-3 px-4 text-muted small">12 minutes ago</td>
              </tr>
              <tr>
                <td class="py-3 px-4 fw-semibold text-dark">#2303</td>
                <td class="py-3 px-4 text-muted">Mahmoud Hassan</td>
                <td class="py-3 px-4 fw-bold text-dark">$650</td>
                <td class="py-3 px-4">
                  <span class="badge rounded-pill fw-bold py-2 px-3 bg-success-subtle text-success">Completed</span>
                </td>
                <td class="py-3 px-4 text-muted small">25 minutes ago</td>
              </tr>
              <tr>
                <td class="py-3 px-4 fw-semibold text-dark">#2304</td>
                <td class="py-3 px-4 text-muted">Sara Khaled</td>
                <td class="py-3 px-4 fw-bold text-dark">$190</td>
                <td class="py-3 px-4">
                  <span class="badge rounded-pill fw-bold py-2 px-3 bg-danger-subtle text-danger">Canceled</span>
                </td>
                <td class="py-3 px-4 text-muted small">40 minutes ago</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </main>
  </div>
</div>